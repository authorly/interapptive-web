%script#template-upload{ :type => "text/x-tmpl" }
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  %tr.template-upload.fade
    %td.preview
      %span.fade
    %td.name
      %span {%= file.name %}
    %td.size
      %span {%= o.formatFileSize(file.size) %}
    {% if (file.error) { %}
    %td.error{ :colspan => 2 }
      %span.label.label-important {%= locale.fileupload.error %}
      {%=locale.fileupload.errors[file.error] || file.error%}
    {% } else if (o.files.valid && !i) { %}
    %td
      .progress.progress-success.progress-striped.active
        .bar{ :style => "width:0%;" }
    %td.start
      {% if (!o.options.autoUpload) { %}
      %button.btn.btn-primary
        %i.icon-upload.icon-white
        %span {%= locale.fileupload.start %}
      {% } %}</td>
    {% } else { %}
    %td{ :colspan => 2 }
    {% } %}

    %td.cancel
      {% if (!i) { %}
      %button.btn.btn-warning
        %i.icon-ban-circle.icon-white
        %span {%= locale.fileupload.cancel %}
      {% } %}</td>
  {% } %}

// The template to display files available for download
%script#template-download{ :type => "text/x-tmpl" }
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  %tr.template-download.fade
    {% if (file.error) { %}
    %td
    %td.name
      %span {%= file.name %}
    %td.size
      %span {%= o.formatFileSize(file.size) %}
    %td.error{ :colspan => 2 }
      %span.label.label-important {%= locale.fileupload.error %}
      {%= locale.fileupload.errors[file.error] || file.error %}
    {% } else { %}
    %td.preview 
      {% if (file.thumbnail_url) { %}
      %a{ :href => "{%= file.url %}", :title => "{%= file.name %}", :rel => "gallery", :download => "{%= file.name %}" }
        %img{ :src => "{%= file.thumbnail_url %}" }
      {% } %}
    %td.name
      %a{ :href => "{%= file.url %}", :title => "{%= file.name %}", :rel => "{%= file.thumbnail_url && 'gallery' %}", :download => "{%= file.name %}" }
        {%= file.name %}
    %td.size
      %span {%= o.formatFileSize(file.size) %}
    %td{ :colspan => 2 }
    {% } %}

    %td.delete
      %button.btn.btn-danger{ :data => { :type => "{%=file.delete_type%}", :url => "{%= file.delete_url %}" } }
        %i.icon-trash.icon-white
        %span {%= locale.fileupload.destroy %}
      %input{ :type => "checkbox", :name => "delete", :value => 1 }
  {% } %}
