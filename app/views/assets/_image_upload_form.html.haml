%form#fileupload{:action => images_path(:json), :enctype => "multipart/form-data", :method => "POST"}
  / The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload
  .row.fileupload-buttonbar
    .span7
      / The fileinput-button span is used to style the file input field as button
      %span.btn.btn-success.fileinput-button
        %i.icon-plus.icon-white
        %span Add files...
        %input{:multiple => "", :name => "files[]", :type => "file"}
      %button.btn.btn-primary.start{:type => "submit"}
        %i.icon-upload.icon-white
        %span Start upload
      %button.btn.btn-warning.cancel{:type => "reset"}
        %i.icon-ban-circle.icon-white
        %span Cancel upload
      %button.btn.btn-danger.delete{:type => "button"}
        %i.icon-trash.icon-white
        %span Delete
      %input.toggle{:type => "checkbox"}
    .span5
      / The global progress bar
      .progress.progress-success.progress-striped.active.fade
        .bar{:style => "width: 0%; "}
  / The loading indicator is shown during image processing
  .fileupload-loading
  %br
    / The table listing the files available for upload/download
    %table.table.table-striped
      %tbody.files{"data-target" => "#modal-gallery", "data-toggle" => "modal-gallery"}
        - @images.each do |image|
          %tr.template-download.fade
            %td.preview
              %a{ :href => image.image.url, :title => image.image.filename, :rel => 'gallery' }
                = image_tag image.image.thumb.url
            %td.name
              %a{ :href => image.image.url, :title => image.image.filename }
                = image.image.filename
            %td.delete
              %button.btn.btn-danger{ 'data-type' => 'DELETE', 'data-url' => image_path(image) }
                %i.icon-trash.icon-white Delete
              
